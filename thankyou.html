<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Merci pour votre achat !</title>

  <!-- Script DataFast -->
  <script
    defer
    data-website-id="6840153027ab6c77f238274a"
    data-domain="toolmonsters-lab.com"
    src="https://datafa.st/js/script.js">
  </script>

  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 4rem;
      background: #fff;
    }
  </style>
</head>
<body>
  <h1>‚úÖ Merci pour votre achat !</h1>
  <p>Votre commande a bien √©t√© enregistr√©e.</p>

  <script>
    // R√©cup√©ration des param√®tres d'URL
    const params = new URLSearchParams(window.location.search);
    const email = params.get("email");
    const amount = params.get("amount") || "0";

    // V√©rifie que l'email est pr√©sent
    if (!email) {
      console.warn("‚ùå Email manquant dans l'URL ‚Äî tracking DataFast non d√©clench√©.");
    } else {
      // Timeout de s√©curit√© au bout de 5s
      let timeout = setTimeout(() => {
        console.warn("‚è±Ô∏è Timeout : DataFast ne s'est pas charg√© √† temps.");
        clearInterval(waitForDatafast);
      }, 5000);

      // Attente du chargement de DataFast
      const waitForDatafast = setInterval(() => {
        if (typeof window.datafast === "function") {
          clearInterval(waitForDatafast);
          clearTimeout(timeout);

          window.datafast("payment", {
            email: email,
            amount: amount,
            currency: "USD",
            country: "auto"
          });

          console.log("üéØ Paiement track√© c√¥t√© client pour :", email);
        }
      }, 300);
    }
  </script>
</body>
</html>
